# ===========================================
# Конфигурация автоматического бэкапа
#
# Этот блок содержит настройки для автоматического резервного копирования данных
# в S3-совместимое хранилище. Бэкап запускается по расписанию в отдельном Docker контейнере.
# ===========================================

# Часовой пояс (по умолчанию: Europe/Moscow)
TZ=Europe/Moscow

# Путь к директории для бекапа (необязательно, по умолчанию - текущая директория)
# Примеры: /var/www/project, /home/user/my-project
BACKUP_SOURCE_PATH=

# Имя проекта (используется для именования бэкапов)
# Будет создаваться архив: {BACKUP_PROJECT_NAME}-backup-YYYY-MM-DD_HH-MM-SS.tar.gz
BACKUP_PROJECT_NAME=project

# S3 бакет для хранения бэкапов (обязательно)
BACKUP_S3_BUCKET=

# Папка внутри S3 бакета (необязательно, по умолчанию - имя проекта из BACKUP_PROJECT_NAME)
# Если не указано, бекапы сохраняются в s3://bucket/[BACKUP_PROJECT_NAME]/
# Примеры: backups, project/backups, prod/backups
BACKUP_S3_FOLDER=

# Эндпоинт S3 сервиса (обязательно)
# Примеры: s3.twcstorage.ru, storage.yandexcloud.net, s3.amazonaws.com
BACKUP_S3_ENDPOINT=

# Ключи доступа к S3 (обязательно)
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=

# Регион S3 (по умолчанию: ru-1)
BACKUP_S3_REGION=ru-1

# Количество последних версий бэкапов для хранения (по умолчанию: 30)
# Будут сохранены только последние N бэкапов, остальные автоматически удалятся
BACKUP_RETENTION_COUNT=30

# Расписание запуска бэкапа в формате cron (по умолчанию: 0 3 * * * - каждый день в 03:00)
# Формат: минута час день месяц день_недели
# Примеры:
#   0 5 * * *     - каждый день в 05:00
#   0 */6 * * *   - каждые 6 часов
#   0 2 * * 0     - каждое воскресенье в 02:00
#   */30 * * * *  - каждые 30 минут
BACKUP_SCHEDULE=0 5 * * *

# Запускать ли бэкап сразу при старте контейнера (по умолчанию: false)
# Полезно для тестирования или создания бэкапа перед важными изменениями
# Значения: true / false
BACKUP_ON_START=false

# Список сервисов для остановки перед бекапом (необязательно)
# Сервисы будут остановлены через "docker stop", 
# а после создания архива запущены через "docker start"
# Укажите названия сервисов через пробел, например: gitea postgres
# Если не указано - сервисы НЕ будут останавливаться
# ВАЖНО: Контейнер backup должен быть запущен из того же docker-compose.yaml что и целевые сервисы
BACKUP_STOP_SERVICES=
